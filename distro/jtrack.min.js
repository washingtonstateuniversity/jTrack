/*! jtrack (1.3.0) 2015-11-09 */
var jtrackOp=[];!function($){function _def(a){return"undefined"!=typeof a}function _eval(ele,obj){if("function"==typeof obj)obj=obj(ele);else try{obj=eval("("+obj+"(ele));")}catch(err){}return obj!==!1?obj:void 0}function _d(a){return $.jtrack.defaults.debug===!0&&_def(window.console)&&_def(window.console.debug)&&window.console.debug(a)}function dump(a,b,c){var d,e,f,g,h;for(d="",b||(b=3),c||(c=0),e="",f=0;c+1>f;f++)e+="	";if("object"==typeof a){if(b>=c)for(g in a)h=a[g],"object"==typeof h?(d+=e+"'"+g+"' ...\n",d+=dump(h,b,c+1)):d+=e+"'"+g+"' => \""+h+'"\n'}else d="===>"+a+"<===("+typeof a+")";return d}$.jtrack=function(a){var b,c,d={};if($.isPlainObject(a))if(b=$.extend({},{debug:!1,clearCampaignUrls:!0,domainName:window.location.host},a),c=b.domainName,_def(b.analytics)){$.jtrack.defaultsettings=$.extend({},$.jtrack.defaultsettings,b.analytics.defaults),$.jtrack.accounts=b.analytics.accounts;var e=b.analytics.ga_name||"ga";window[e]=void 0,$.fn.trackPage(e,function(a,b){"undefined"!==a&&($.isArray(a)||$.isPlainObject(a)?$.each(a,function(a,d){_d("appling: "+d.element+" for scope "+b);var f=d.element.replace("**SELF_DOMAIN**",c);$(f).jtrack(_def(d.options)?d.options:null,e,b)}):$.ajax({dataType:"jsonp",url:a,success:function(a){$.each(a,function(a,d){_d("appling: "+d.element+" for scope "+b);var f=d.element.replace("**SELF_DOMAIN**",c);$(f).jtrack(_def(d.options)?d.options:null,e,b)})}}))})}else _def(b.events)&&$.each(b.events,function(a,b){var d=b.element.replace("**SELF_DOMAIN**",c);$(d).jtrack(_def(b.options)?b.options:null)});else d=jtrackOp[a],d.ele.triggerHandler(d.tasactedEvent)},$.jtrack.defaults={debug:!1},$.jtrack.eventdefaults={mode:"event",category:function(a){return a[0].hostname===location.hostname?"internal":"external"},action:function(a){return"undefined"!=typeof a.attr("alt")?a.attr("alt"):""},label:function(a){return"undefined"!=typeof a.text()?a.attr("href"):""},value:function(a){return"undefined"!=typeof a.text()?a.text():""},eventTracked:"click",skip_internal:!1,overwrites:!0,alias:null,nonInteraction:null,callback:function(){}},$.jtrack.accounts={},$.jtrack.settings={},$.jtrack.defaultsettings={ga_name:"ga",namedSpace:!1,cookieName:!1,cookieDomain:window.location.host,cookieExpires:!1,cookiePath:"/",autoLink:!0,autoLinkDomains:[],dimension:[],metrics:[],location:null,hostname:null,experimentID:null,expVar:null,sampleRate:!1,displayfeatures:!1,ecommerce:!1,linkid:!0,events:!1,force_campaign:!1},$.jtrack.init_analytics=function(a,b){_d("Google Analytics loaded");var c=window[a],d=$.jtrack.accounts.length;$.each($.jtrack.accounts,function(a,e){var f,g,h,i,j,k,l,m;$.jtrack.settings=$.extend({},$.jtrack.defaultsettings,e.settings),f=$.jtrack.settings,g=f.namedSpace?{name:f.namedSpace}:{},h=$.isPlainObject(g)&&"undefined"!=typeof g.name?g.name+".":"",i=f.cookiePath?{cookiePath:f.cookiePath}:{},j=f.cookieDomain?{cookieDomain:f.cookieDomain}:{},k=f.autoLink?{allowLinker:!0}:{},l=f.sampleRate?{sampleRate:f.sampleRate}:{};var n=!1,o=!1;"undefined"!=typeof Storage&&(document.cookie.match(new RegExp("_ga=([^;]+)"))?(o=(location.search.split("_ga=")[1]||"").split("&")[0],localStorage.setItem("ua_cid",n)):o=localStorage.getItem("ua_cid")),o!==!1?n=o:c(function(b){var d=!1;""!==h&&d!==!1&&(d=c.get(h),_d(d)),""!==h&&"undefined"==typeof d&&(d=c.getAll()[a],_d(d)),d!==!1&&(b=d),n="undefined"!=typeof b?b.get("clientId"):!1}),n!==!1&&c("set","clientId",n),m=$.extend({},g,j,i,k,l),c("create",e.id,m==={}?"auto":m),"undefined"!=typeof Storage&&c(function(b){var d=!1;if(""!==h&&d!==!1&&(d=c.get(h),_d(d)),""!==h&&"undefined"==typeof d&&(d=c.getAll()[a],_d(d)),d!==!1&&(b=d),!localStorage.getItem("ua_cid")){var e=b.get("clientId");localStorage.setItem("ua_cid",e)}}),null!==f.location&&c(h+"set","location",f.location),null!==f.hostname&&c(h+"set","hostname",f.hostname),null!==f.experimentID&&(c(h+"set","expId",f.experimentID),c(h+"set","expVar",f.expVar)),f.dimension.length>0&&$.each(f.dimension,function(a,b){c(h+"set",b.name,b.val)}),f.metrics.length>0&&$.each(f.metrics,function(a,b){c(h+"set",b.name,b.val)}),k!=={}&&(c(h+"require","linker"),f.autoLinkDomains.length>0&&c(h+"linker:autoLink",f.autoLinkDomains)),f.linkid&&c(h+"require","linkid","linkid.js"),f.displayfeatures&&c(h+"require","displayfeatures"),f.force_campaign!==!1&&$.isPlainObject(f.force_campaign)&&(f.force_campaign.campaignName&&c("set","campaignName",f.force_campaign.campaignName),f.force_campaign.campaignSource&&c("set","campaignSource",f.force_campaign.campaignSource),f.force_campaign.campaignMedium&&c("set","campaignMedium",f.force_campaign.campaignMedium),f.force_campaign.campaignKeyword&&c("set","campaignKeyword",f.force_campaign.campaignKeyword),f.force_campaign.campaignContent&&c("set","campaignContent",f.force_campaign.campaignContent)),c(h+"send","pageview",{hitCallback:function(){d===a+1&&$.jtrack.clearCampaignUrl()}}),f.ecommerce&&c(h+"require","ecommerce"),$.isFunction(b)&&f.events!==!1&&c(function(){b(f.events,h)})})},$.jtrack.load_script=function(a,b){!function(c,d,e,f,g,h,i){c.GoogleAnalyticsObject=g,c[g]=c[g]||function(){(c[g].q=c[g].q||[]).push(arguments)},c[g].l=1*new Date,h=d.createElement(e),i=d.getElementsByTagName(e)[0],h.async=1,h.src=f,i.parentNode.insertBefore(h,i),$.jtrack.init_analytics(a,b)}(window,document,"script","https://www.google-analytics.com/analytics.js",a||"ga")},$.fn.trackPage=function(a,b){var c=window[a];"undefined"!=typeof c&&c.length>0?_d("!!!!!! Google Analytics loaded previously !!!!!!!"):$.jtrack.settings.onload===!0||null===$.jtrack.settings.onload?$(document).ready(function(){$.jtrack.load_script(a,b)}):$.jtrack.load_script(a,b)},$.fn.trackEvent=function(a,b,c,d,e,f,g){arguments.length<5&&(e="ga"),arguments.length<6&&(f=""),arguments.length<7&&(g="");var h="undefined"!=typeof this.selector?$(this.selector):null;$.jtrack.trackEvent(h,e,f,a,b,c,d,g)},$.jtrack.trackEvent=function(a,b,c,d,e,f,g,h){var i=window[b];if(_def(i)){var j,k,l,m;j=null!==d?{eventCategory:d}:{},k=null!==e?{eventAction:e}:{},l=null!==f?{eventLabel:f}:{},m=null!==g?{eventValue:g}:{},c.length>1&&c.indexOf(".")<0&&(c+="."),i(c+"send","event",$.extend({},j,k,l,m)),"undefined"!=typeof h&&($.isFunction(h)?h(a):_eval(a,h)),_d("Fired "+c+"send for Tracking")}else _d("FATAL: ga is not defined")},$.jtrack.trackSocial=function(a,b,c,d,e,f){var g=window[b];if(_def(g)){var h,i,j;h=null!==d?{socialNetwork:d}:{},i=null!==e?{socialAction:e}:{},j=null!==f?{socialTarget:f}:{},g(c+"send","social",$.extend({},h,i,j)),_d("Fired "+c+"send for Social Tracking")}else _d("FATAL: ga is not defined")},$.jtrack.trackPageview=function(a,b){_def(a)?(a._trackPageview(b),_d("Fired event for _trackPageview for "+b)):_d("FATAL: pageTracker is not defined")},$.jtrack.hit=function(a,b,c,d,e){var f=window[b];if(_def(f)){var g,h;g=null!==d?{hitType:d}:{},h=null!==e?{page:e}:{},f(c+"send",$.extend({},g,h)),_d("Fired "+c+"send for hitType Tracking")}else _d("FATAL: ga is not defined")},$.jtrack.clearCampaignUrl=function(){var a=window.location.href,b=["utm_source","utm_medium","utm_term","utm_content","utm_campaign","_ga"];if(a.indexOf("utm_source=")>-1||a.indexOf("_ga=")>-1){var c=a.split(window.location.host)[1],d=a.split("?")[1];if(c=a.split("?")[0],""!==d){var e=d.split("&"),f=[];if($.each(e,function(a,c){var d=c.split("=");-1===$.inArray(d[0],b)&&f.push(c)}),f.length>0){var g=f.join("&");c=c+"?"+g}}window.history.replaceState(null,$(document).find("title").text(),c)}},$.fn.jtrack=function(a,b,c){return $.each($(this),function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=window[b];return d=$(this),e=$.extend({},$.jtrack.eventdefaults,a),f=_eval(d,e.overwrites),f="undefined"===f?"true":f,d.is(".tracked")&&"false"===f?!1:(d.addClass("tracked"),g=e.mode,h=_eval(d,e.alias),i=_eval(d,e.category),j=_eval(d,e.action),k=_eval(d,e.eventTracked),j=""===j?k:j,n=_eval(d,e.skip_internal),o=e._link,p=e.nonInteraction,q=e.callback,d.attr("role",k+"_"+j+"_"+i),r=k+"."+("undefined"===h||null===h?"jtrack":h),s=n&&d[0].hostname===location.hostname,t="undefined"===h||null===h?k:h,jtrackOp[t]=[],jtrackOp[t].ele=d,jtrackOp[t].tasactedEvent=r,"true"===f&&(d.off(r),d.unbind(r),_d("overwriting "+r)),_d(s?"Skipping ":"Tracking  event "+r),d.on(r,function(a){if(null!==p&&w("set","nonInteraction",p),_d("doing event "+r),!s&&g.indexOf("event")>-1&&(j=_eval(d,e.action),l=_eval(d,e.label),i=_eval(d,e.category),m=_eval(d,e.value),m=isNaN(m)?1:m,$.jtrack.trackEvent(d,b,c,i,j,l,m,q)),g.indexOf("_social")>-1&&(u=_eval(d,e.network),v=_eval(d,e.socialAction),$.jtrack.trackSocial(d,b,c,u,v)),g.indexOf("_link")>-1){_d("Fired _link for Tracking for _link from mode: "+g);var f=a.target||a.srcElement;f&&f.href&&w(c+"linker:decorate",f)}return!0}),void 0)})}}(jQuery);